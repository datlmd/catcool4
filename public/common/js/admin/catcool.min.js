var is_processing=!1,Catcool={makeSlug:function(a){var b=$(a).val();return b=Catcool.convertSlug(b),$('#'+$(a).data("slug-id")).length&&($('#'+$(a).data("slug-id")).attr('placeholder',b),$('#'+$(a).data("slug-id")).val(b)),$('#'+$(a).data("preview-slug")).length&&!$('#'+$(a).data("slug-id")).val().length&&$('#'+$(a).data("preview-slug")).html(b),$('#'+$(a).data("title-id")).length&&($('#'+$(a).data("title-id")).attr('placeholder',$(a).val()),$('#'+$(a).data("title-id")).val($(a).val()),$('.preview-meta-seo').show()),$('#'+$(a).data("preview-title")).length&&!$('#'+$(a).data("preview-title")).val().length&&$('#'+$(a).data("preview-title")).html($(a).val()),!0},convertSlug:function(b){var a=b;return a=a.replace(/[`~!@#$%^&*()_\-+=[\]{};:'"\\|/,.<>?\s]/g,' ').toLowerCase(),a=a.replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,'a'),a=a.replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,'e'),a=a.replace(/i|í|ì|ỉ|ĩ|ị/gi,'i'),a=a.replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,'o'),a=a.replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,'u'),a=a.replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,'y'),a=a.replace(/đ/gi,'d'),a=a.replace(/`|~|!|@|#|\||\$|%|\^|&|\*|\(|\)|\+|=|,|\.|\/|\?|>|<|'|"|:|;|_/gi,''),a=a.replace(/ /gi," - "),a=a.replace(/-----/gi,'-'),a=a.replace(/----/gi,'-'),a=a.replace(/---/gi,'-'),a=a.replace(/--/gi,'-'),a='@'+a+'@',a=a.replace(/@-|-@|@/gi,''),a=a.replace(/[^a-z0-9 -]/g,'').replace(/\s+/g,'-').replace(/-+/g,'-'),a},setContentSeo:function(a){if(!$('#'+$(a).data("seo-id")).length)return;var b="",c;$(a).val().length&&(b=$(a).val()),$(a).data("is-slug")&&(b=Catcool.convertSlug(b),$(a).val(b)),$('.preview-meta-seo').show(),$('#'+$(a).data("seo-id")).html(b),c=$(a).data("seo-id")+'_length',$('#'+c).length&&($(a).val().length?$('#'+c).html($(a).val().length):$(a).attr('placeholder')?$('#'+c).html($(a).attr('placeholder').length):$('#'+c).html(0)),$.trim($('.preview-meta-seo .meta-seo-title').html())==''&&$.trim($('.preview-meta-seo .meta-seo-url').html())==''&&$.trim($('.preview-meta-seo .meta-seo-description').html())==''&&$('.preview-meta-seo').hide()},checkLoadContentSeo:function(){return!!$('.seo-meta-length').length&&($('.seo-meta-length').each(function(){var a=$(this).data('target');$('#'+a).val().length?$(this).html($('#'+a).val().length):$('#'+a).attr('placeholder')?$(this).html($('#'+a).attr('placeholder').length):$(this).html(0)}),!0)},changePublish:function(a){if(is_processing)return!1;if(!$('input[name="manage_url"]').length)return!1;var c=$('input[name="manage_url"]').val(),d=$(a).data("id"),b=0,e=c+'/publish';$(a).is(':checked')&&(b=1),is_processing=!0,$.ajax({url:e,data:{id:d,published:b,[$("input[name*='"+csrf_token+"']").attr('name')]:$("input[name*='"+csrf_token+"']").val()},type:'POST',success:function(c){is_processing=!1;var b=JSON.stringify(c);if(b=JSON.parse(b),b.token&&$("input[name*='"+csrf_token+"']").val(b.token),b.status=='ng')return $.notify(b.msg,{type:'danger'}),$(a).prop("checked",$(a).attr("value")),!1;$.notify(b.msg)},error:function(a){is_processing=!1,$.notify({message:a.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:'danger'})}})},checkBoxDelete:function(){if(!$('input[name="manage_check_all"]').length)return!1;if(!$('input[name="manage_ids[]"]').length)return!1;$(document).on('change','input[name="manage_check_all"]',function(){$('#delete_multiple').addClass(['animate__animated','animate__fadeIn']).show(),$('input[name="manage_ids[]"]').prop('checked',$(this).prop("checked")),$('input[name="manage_ids[]"]:checked').length||$('#delete_multiple').hide()}),$(document).on('change','input[name="manage_ids[]"]',function(){$('input[name="manage_ids[]"]').each(function(){$(this).is(":checked")&&$('#delete_multiple').addClass(['animate__animated','animate__fadeIn']).show()}),$('input[name="manage_check_all"]').prop('checked',!1),$('input[name="manage_ids[]"]:checked').length?$('input[name="manage_ids[]"]:checked').length==$('input[name="manage_ids[]"]').length&&$('input[name="manage_check_all"]').prop('checked',!0):$('#delete_multiple').hide()}),$(document).on('click',"#delete_multiple",function(b){b.preventDefault();var c=$(this),a=[];$('input[name="manage_ids[]"]:checked').each(function(){a.push($(this).val())}),Catcool.getModalDelete(c,a)})},deleteSingle:function(){if(!$('.btn_delete_single').length)return!1;$(document).on('click',".btn_delete_single",function(b){b.preventDefault();var a=$(this);Catcool.getModalDelete(a,a.data('id'),!0)})},getModalDelete:function(a,e,b){if(!$('input[name="manage_url"]').length)return!1;if(is_processing)return!1;is_processing=!0;var f=$('input[name="manage_url"]').val(),c=f+'/delete',d=0;a.data('is-trash')==1&&(d=1),c+="?is_trash="+d,$.ajax({url:c,data:{delete_ids:e,[$("input[name*='"+csrf_token+"']").attr('name')]:$("input[name*='"+csrf_token+"']").val()},type:'POST',beforeSend:function(){b?a.find('i').replaceWith('<i class="fas fa-spinner fa-spin"></i>'):a.find('i').replaceWith('<i class="fas fa-spinner fa-spin me-1"></i>')},complete:function(){b?a.find('i').replaceWith('<i class="fas fa-trash-alt"></i>'):a.find('i').replaceWith('<i class="fas fa-trash-alt me-1"></i>')},success:function(b){is_processing=!1;var a=JSON.stringify(b);if(a=JSON.parse(a),a.token&&$("input[name*='"+csrf_token+"']").val(a.token),a.status=='ng')return $.notify(a.msg,{type:'danger'}),!1;if(a.status=='redirect')return window.location=a.url,!1;$('#modal_delete_confirm').remove(),$('body').append('<div id="modal_delete_confirm" class="modal fade" role="dialog">'+a.data+'</div>'),$('#modal_delete_confirm').modal('show')},error:function(a){is_processing=!1,$.notify({message:a.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:'danger'})}})},submitDelete:function(a){if(is_processing)return!1;is_processing=!0,$.ajax({url:$('#'+a).attr('action'),type:'POST',data:$("#"+a).serialize(),beforeSend:function(){$('#'+a+' #submit_delete').find('i').replaceWith('<i class="fas fa-spinner fa-spin me-1"></i>')},complete:function(){$('#'+a+' #submit_delete').find('i').replaceWith('<i class="fas fa-trash-alt me-1"></i>')},success:function(b){is_processing=!1;var a=JSON.stringify(b);if(a=JSON.parse(a),a.token&&$("input[name*='"+csrf_token+"']").val(a.token),a.status=='redirect')return window.location=a.url,!1;if(a.status=='ng')return $.notify(a.msg,{type:'danger'}),!1;if(a.status=='reload')return location.reload(),!1;$.each(a.ids,function(b,a){if(!$("tr#item_id_"+a).length)return location.reload(),!1;$("tr#item_id_"+a).remove('slow').fadeOut(),$("tr#item_id_"+a+" .btn_delete_single").tooltip('dispose')}),$('#modal_delete_confirm').modal('hide'),$.notify(a.msg)},error:function(a){is_processing=!1,$.notify({message:a.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:'danger'})}})},showDatetime:function(){if($('.show-datetime-picker').length){var a={sideBySide:!1,icons:{time:"far fa-clock active",date:"fa fa-calendar-alt",up:"fa fa-arrow-up",down:"fa fa-arrow-down"},daysOfWeekDisabled:[0,6]};$('.show-datetime-picker').data('date-locale')=='vi'&&(a={sideBySide:!1,icons:{time:"far fa-clock active",date:"fa fa-calendar-alt",up:"fa fa-arrow-up",down:"fa fa-arrow-down"},daysOfWeekDisabled:[0,6],locale:'vi'}),$('.show-datetime-picker').datetimepicker(a)}},showDate:function(){if($('.show-date-picker').length){var a={sideBySide:!1};$('.show-date-picker').data('date-locale')=='vi'&&(a={sideBySide:!1,locale:'vi'}),$('.show-date-picker').datetimepicker(a)}},showTime:function(){$('.show-time-picker').length&&$('.show-time-picker').datetimepicker({sideBySide:!1,format:$('.show-time-picker').data('date-format'),pickDate:!1,pickSeconds:!1,pick12HourFormat:!1})},checkBoxPermission:function(){if(!$('input[name="cb_permission_all"]').length)return!1;if(!$('input[name="permissions[]"]').length)return!1;$(document).on('change','input[name="cb_permission_all"]',function(){$('input[name="permissions[]"]').prop('checked',$(this).prop("checked"))}),$(document).on('change','input[name="permissions[]"]',function(){$('input[name="cb_permission_all"]').prop('checked',!1),$('input[name="permissions[]"]:checked').length==$('input[name="permissions[]"]').length&&$('input[name="cb_permission_all"]').prop('checked',!0)})},changeCaptcha:function(){if(is_processing)return!1;if(!$('.js-re-captcha').length)return!1;is_processing=!0,$.ajax({url:'users/auth/recaptcha',type:'POST',data:[],beforeSend:function(){$('.js-re-captcha').find('i').replaceWith('<i class="fas fa-spinner fa-spin me-2"></i>')},complete:function(){$('.js-re-captcha').find('i').replaceWith('<i class="fas fa-sync font-18"></i>')},success:function(b){is_processing=!1;var a=JSON.stringify(b);a=JSON.parse(a),$('#ci_captcha_image').html(a.captcha),$('#ci_captcha_image').fadeIn("slow")},error:function(){is_processing=!1}})},scrollMenu:function(){$('.nav-left-sidebar-scrolled').length?($(".nav-left-sidebar").removeClass('nav-left-sidebar-scrolled'),$(".dashboard-wrapper").removeClass('nav-left-sidebar-content-scrolled'),$(".nav-left-sidebar .btn-scroll").addClass('btn-light'),$(".nav-left-sidebar .btn-scroll").removeClass('btn-warning'),$('.nav-left-sidebar .btn-scroll').find('i').replaceWith('<i class="fas fa-angle-double-left font-8"></i>')):($(".nav-left-sidebar").addClass('nav-left-sidebar-scrolled'),$(".dashboard-wrapper").addClass('nav-left-sidebar-content-scrolled'),$(".nav-left-sidebar .btn-scroll").removeClass('btn-light'),$(".nav-left-sidebar .btn-scroll").addClass('btn-warning'),$('.nav-left-sidebar .btn-scroll').find('i').replaceWith('<i class="fas fa-angle-double-right font-14 text-dark"></i>'))},setCookie:function(b,c,d){var a=new Date;d?(a.setTime(a.getTime()+d*24*60*60*1e3),document.cookie=b+'='+c+';expires='+a.toUTCString()):document.cookie=b+'='+c+';expires=Fri, 30 Dec 9999 23:59:59 GMT;'},getCookie:function(b){var a=document.cookie.match('(^|;) ?'+b+'=([^;]*)(;|$)');return a?a[2]:null},showMenuFileManager:function(){return!is_processing&&(is_processing=!0,$('#modal_image').remove(),$('body').append('<div class="loading"><span class="dashboard-spinner spinner-xs"></span></div>'),$.ajax({async:!0,url:'common/filemanager',type:'GET',data:{is_show_lightbox:1},success:function(b){is_processing=!1,$('.loading').remove().fadeOut();var a=JSON.stringify(b);if(a=JSON.parse(a),a.status=='ng')return $.notify(a.msg,{type:'danger'}),!1;$('body').append('<div id="modal_image" class="modal fade" role="dialog" data-bs-keyboard="false"  data-bs-backdrop="static" tabindex="-1">'+b+'</div>'),$('html').css('overflow','hidden'),$('#modal_image').modal('show')},error:function(a){is_processing=!1,$('.loading').remove().fadeOut(),$.notify({message:a.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:'danger'})}}),!1)},cropImage:function(a,b){return!is_processing&&(is_processing=!0,$('#cropper_html').remove(),$('body').append('<div class="loading"><span class="dashboard-spinner spinner-xs"></span></div>'),$.ajax({url:'image/crop',data:{image_url:a,preserve_aspect_ratio:b},dataType:'html',success:function(b){is_processing=!1,$('.loading').remove().fadeOut();var a=JSON.stringify(b);if(a=JSON.parse(a),a.status=='ng')return $.notify(a.msg,{type:'danger'}),!1;$('body').append('<div id="cropper_html">'+b+'</div>'),$('#modal_image_crop').modal('toggle')},error:function(a){is_processing=!1,$('.loading').remove().fadeOut(),$.notify({message:a.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:'danger'})}}),!1)},showRangeValue:function(a){if(!$(a).data("target").length)return;$($(a).data("target")).html($(a).val())}};$(function(){$(window).on('load',function(){$('.loading').fadeOut(),$('#page_loading').fadeOut()}),setTimeout(function(){$('#page_loading').fadeOut()},4e3),$('.make-slug').length&&$(".make-slug").on("keyup",function(){Catcool.makeSlug(this)}),$('a[href="#"]').click(function(a){a.preventDefault?a.preventDefault():a.returnValue=!1}),$('.change_publish').length&&$(document).on('change','.change_publish',function(a){a.preventDefault(),Catcool.changePublish(this)}),$(document).on('click','#menu_file_manager, .show-file-manager',function(a){return a.preventDefault(),Catcool.showMenuFileManager(),!1}),$(document).on('hidden.bs.modal, hide.bs.modal','#modal_image',function(){$('html').css('overflow','')}),$("form").length&&$("form").on("keypress",function(a){var b=a.keyCode||a.which;if(b===13)return a.preventDefault(),!1}),$(".form-confirm-leave").length&&($('.form-confirm-leave form').data('serialize',$('.form-confirm-leave form').serialize()),$(window).bind('beforeunload',function(a){if($('.form-confirm-leave form').serialize()!=$('.form-confirm-leave form').data('serialize'))return!0;a=null}),$(document).on('click','.form-confirm-leave .btn',function(){$(window).unbind('beforeunload')})),$.notifyDefaults({type:'success',placement:{from:'top',align:'center'}}),$('input[name="alert_msg[]"]').length&&$('input[name="alert_msg[]"]').each(function(){$.notify($(this).val(),{type:$(this).data('type')})}),Catcool.checkBoxDelete(),Catcool.deleteSingle(),Catcool.showDatetime(),Catcool.showDate(),Catcool.showTime(),Catcool.checkBoxPermission(),$(document).on("click","[data-toggle='lightbox']",function(a){a.preventDefault(),$(this).ekkoLightbox()}),$("[data-bs-toggle='popover']").length&&($("[data-bs-toggle='popover']").popover('dispose'),$("[data-bs-toggle='popover']").popover()),$("[data-bs-toggle='tooltip']").length&&($("[data-bs-toggle='tooltip']").tooltip('dispose'),$("[data-bs-toggle='tooltip']").tooltip()),$('#btn_search').length&&$(document).on('click','#btn_search',function(){$($('#btn_search').data('target')).collapse('toggle')}),$('.multiselect').length&&($('.multiselect').multiselect({buttonClass:'btn btn-sm border text-start',buttonWidth:'100%'}),$('#category_review').length&&($('.multiselect').change(function(){var b=$(this).find('option:selected').map(function(){return $(this).text()}).get().join(','),a;if($('#category_review ul').remove(),$('#category_review').append('<ul class="list-unstyled bullet-check mb-0"></ul>'),a=b.split(','),a.length&&a!="")for(i=0;i<a.length;i++)$('#category_review ul').append('<li>'+a[i]+'</li>');$('#category_review').show()}),setTimeout(function(){$('.multiselect').val()?($('#category_review').append('<ul class="list-unstyled bullet-check mb-0"></ul>'),$('.multiselect :selected').each(function(){$('#category_review ul').append('<li>'+$(this).text()+'</li>')}),$('#category_review').show()):$('#category_review').hide()},500))),$(".notification-list").length&&$('.notification-list').slimScroll({height:'250px'}),$(".navbar-full-text .menu-list").length&&$('.navbar-full-text .menu-list').slimScroll({}),$(".navbar-full-text .menu-list a").length&&$('.navbar-full-text .menu-list a').click(function(){$('.navbar-full-text .menu-list a').each(function(){$(this).removeClass('active')}),$(this).addClass('active')}),Catcool.checkLoadContentSeo(),$('.color-picker').length&&$('.color-picker').each(function(){$(this).minicolors({control:$(this).data('control')||'hue',defaultValue:$(this).data('defaultValue')||'',format:$(this).data('format')||'hex',keywords:$(this).data('keywords')||'',inline:$(this).data('inline')==='true',letterCase:$(this).data('letterCase')||'lowercase',opacity:$(this).data('opacity'),position:$(this).data('position')||'bottom left',swatches:$(this).data('swatches')?$(this).data('swatches').split('|'):[],change:function(a,b){if(!a)return;b&&(a+=', '+b),typeof console=='object'&&console.log(a)},theme:'bootstrap'})})})