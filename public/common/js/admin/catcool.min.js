var is_processing=!1,Catcool={makeSlug:function(e){var t=$(e).val();return t=Catcool.convertSlug(t),$("#"+$(e).data("slug-id")).length&&($("#"+$(e).data("slug-id")).attr("placeholder",t),$("#"+$(e).data("slug-id")).val(t)),$("#"+$(e).data("preview-slug")).length&&!$("#"+$(e).data("slug-id")).val().length&&$("#"+$(e).data("preview-slug")).html(t),$("#"+$(e).data("title-id")).length&&($("#"+$(e).data("title-id")).attr("placeholder",$(e).val()),$("#"+$(e).data("title-id")).val($(e).val()),$(".preview-meta-seo").show()),$("#"+$(e).data("preview-title")).length&&!$("#"+$(e).data("preview-title")).val().length&&$("#"+$(e).data("preview-title")).html($(e).val()),!0},convertSlug:function(e){var t=e;return t=(t=(t="@"+(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/[`~!@#$%^&*()_\-+=\[\]{};:'"\\|\/,.<>?\s]/g," ").toLowerCase()).replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a")).replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e")).replace(/i|í|ì|ỉ|ĩ|ị/gi,"i")).replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o")).replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u")).replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y")).replace(/đ/gi,"d")).replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,"")).replace(/ /gi," - ")).replace(/\-\-\-\-\-/gi,"-")).replace(/\-\-\-\-/gi,"-")).replace(/\-\-\-/gi,"-")).replace(/\-\-/gi,"-"))+"@").replace(/\@\-|\-\@|\@/gi,"")).replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},setContentSeo:function(e){if($("#"+$(e).data("seo-id")).length){var t="";$(e).val().length&&(t=$(e).val()),$(e).data("is-slug")&&(t=Catcool.convertSlug(t),$(e).val(t)),$(".preview-meta-seo").show(),$("#"+$(e).data("seo-id")).html(t);var a=$(e).data("seo-id")+"_length";$("#"+a).length&&($(e).val().length?$("#"+a).html($(e).val().length):$(e).attr("placeholder")?$("#"+a).html($(e).attr("placeholder").length):$("#"+a).html(0)),""==$.trim($(".preview-meta-seo .meta-seo-title").html())&&""==$.trim($(".preview-meta-seo .meta-seo-url").html())&&""==$.trim($(".preview-meta-seo .meta-seo-description").html())&&$(".preview-meta-seo").hide()}},checkLoadContentSeo:function(){return!!$(".seo-meta-length").length&&($(".seo-meta-length").each((function(){var e=$(this).data("target");$("#"+e).val().length?$(this).html($("#"+e).val().length):$("#"+e).attr("placeholder")?$(this).html($("#"+e).attr("placeholder").length):$(this).html(0)})),!0)},changePublish:function(e){if(is_processing)return!1;if(!$('input[name="manage_url"]').length)return!1;var t=$('input[name="manage_url"]').val(),a=$(e).data("id"),i=0,n=t+"/publish";$(e).is(":checked")&&(i=1),is_processing=!0,$.ajax({url:n,data:{id:a,published:i,data:$(e).data(),[$("input[name*='"+csrf_token+"']").attr("name")]:$("input[name*='"+csrf_token+"']").val()},type:"POST",success:function(t){is_processing=!1;var a=JSON.stringify(t);if((a=JSON.parse(a)).token&&$("input[name*='"+csrf_token+"']").val(a.token),"ng"==a.status)return $.notify(a.msg,{type:"danger"}),$(e).prop("checked",$(e).attr("value")),!1;$.notify(a.msg)},error:function(e,t,a){is_processing=!1,$.notify({message:e.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}})},checkBoxDelete:function(){return!!$('input[name="manage_check_all"]').length&&(!!$('input[name="manage_ids[]"]').length&&($(document).on("change",'input[name="manage_check_all"]',(function(){$("#delete_multiple").addClass(["animate__animated","animate__fadeIn"]).show(),$('input[name="manage_ids[]"]').prop("checked",$(this).prop("checked")),$('input[name="manage_ids[]"]:checked').length||$("#delete_multiple").hide()})),$(document).on("change",'input[name="manage_ids[]"]',(function(){$('input[name="manage_ids[]"]').each((function(){$(this).is(":checked")&&$("#delete_multiple").addClass(["animate__animated","animate__fadeIn"]).show()})),$('input[name="manage_check_all"]').prop("checked",!1),$('input[name="manage_ids[]"]:checked').length?$('input[name="manage_ids[]"]:checked').length==$('input[name="manage_ids[]"]').length&&$('input[name="manage_check_all"]').prop("checked",!0):$("#delete_multiple").hide()})),void $(document).on("click","#delete_multiple",(function(e){e.preventDefault();var t=$(this),a=[];$('input[name="manage_ids[]"]:checked').each((function(){a.push($(this).val())})),Catcool.getModalDelete(t,a)}))))},deleteSingle:function(){if(!$(".btn_delete_single").length)return!1;$(document).on("click",".btn_delete_single",(function(e){e.preventDefault();var t=$(this);Catcool.getModalDelete(t,t.data("id"),!0)}))},getModalDelete:function(e,t,a){if(!$('input[name="manage_url"]').length)return!1;if(is_processing)return!1;is_processing=!0;var i=$('input[name="manage_url"]').val()+"/delete",n=0;1==e.data("is-trash")&&(n=1),i+="?is_trash="+n,$.ajax({url:i,data:{delete_ids:t,data:e.data(),[$("input[name*='"+csrf_token+"']").attr("name")]:$("input[name*='"+csrf_token+"']").val()},type:"POST",beforeSend:function(){a?e.find("i").replaceWith('<i class="fas fa-spinner fa-spin"></i>'):e.find("i").replaceWith('<i class="fas fa-spinner fa-spin me-1"></i>')},complete:function(){a?e.find("i").replaceWith('<i class="fas fa-trash-alt"></i>'):e.find("i").replaceWith('<i class="fas fa-trash-alt me-1"></i>')},success:function(e){is_processing=!1;var t=JSON.stringify(e);return(t=JSON.parse(t)).token&&$("input[name*='"+csrf_token+"']").val(t.token),"ng"==t.status?($.notify(t.msg,{type:"danger"}),!1):"redirect"==t.status?(window.location=t.url,!1):($("#modal_delete_confirm").remove(),$("body").append('<div id="modal_delete_confirm" class="modal fade" role="dialog">'+t.data+"</div>"),void $("#modal_delete_confirm").modal("show"))},error:function(e,t,a){is_processing=!1,$.notify({message:e.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}})},submitDelete:function(e){if(is_processing)return!1;is_processing=!0,$.ajax({url:$("#"+e).attr("action"),type:"POST",data:$("#"+e).serialize(),beforeSend:function(){$("#"+e+" #submit_delete").find("i").replaceWith('<i class="fas fa-spinner fa-spin me-1"></i>')},complete:function(){$("#"+e+" #submit_delete").find("i").replaceWith('<i class="fas fa-trash-alt me-1"></i>')},success:function(e){is_processing=!1;var t=JSON.stringify(e);return(t=JSON.parse(t)).token&&$("input[name*='"+csrf_token+"']").val(t.token),"redirect"==t.status?(window.location=t.url,!1):"ng"==t.status?($.notify(t.msg,{type:"danger"}),!1):"reload"==t.status?(location.reload(),!1):($.each(t.ids,(function(e,t){if(!$("tr#item_id_"+t).length)return location.reload(),!1;$("tr#item_id_"+t).remove("slow").fadeOut(),$("tr#item_id_"+t+" .btn_delete_single").tooltip("dispose")})),$("#modal_delete_confirm").modal("hide"),void $.notify(t.msg))},error:function(e,t,a){is_processing=!1,$.notify({message:e.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}})},showDatetime:function(){if($(".show-datetime-picker").length){var e={sideBySide:!1,icons:{time:"far fa-clock active",date:"fa fa-calendar-alt",up:"fa fa-arrow-up",down:"fa fa-arrow-down"},daysOfWeekDisabled:[0,6]};"vi"==$(".show-datetime-picker").data("date-locale")&&(e={sideBySide:!1,icons:{time:"far fa-clock active",date:"fa fa-calendar-alt",up:"fa fa-arrow-up",down:"fa fa-arrow-down"},daysOfWeekDisabled:[0,6],locale:"vi"}),$(".show-datetime-picker").datetimepicker(e)}},showDate:function(){if($(".show-date-picker").length){var e={sideBySide:!1};"vi"==$(".show-date-picker").data("date-locale")&&(e={sideBySide:!1,locale:"vi"}),$(".show-date-picker").datetimepicker(e)}},showTime:function(){$(".show-time-picker").length&&$(".show-time-picker").datetimepicker({sideBySide:!1,format:$(".show-time-picker").data("date-format"),pickDate:!1,pickSeconds:!1,pick12HourFormat:!1})},checkBoxPermission:function(){return!!$('input[name="cb_permission_all"]').length&&(!!$('input[name="permissions[]"]').length&&($(document).on("change",'input[name="cb_permission_all"]',(function(){$('input[name="permissions[]"]').prop("checked",$(this).prop("checked"))})),void $(document).on("change",'input[name="permissions[]"]',(function(){$('input[name="cb_permission_all"]').prop("checked",!1),$('input[name="permissions[]"]:checked').length==$('input[name="permissions[]"]').length&&$('input[name="cb_permission_all"]').prop("checked",!0)}))))},changeCaptcha:function(){return!is_processing&&(!!$(".js-re-captcha").length&&(is_processing=!0,void $.ajax({url:"users/auth/recaptcha",type:"POST",data:[],beforeSend:function(){$(".js-re-captcha").find("i").replaceWith('<i class="fas fa-spinner fa-spin me-2"></i>')},complete:function(){$(".js-re-captcha").find("i").replaceWith('<i class="fas fa-sync font-18"></i>')},success:function(e){is_processing=!1;var t=JSON.stringify(e);t=JSON.parse(t),$("#ci_captcha_image").html(t.captcha),$("#ci_captcha_image").fadeIn("slow")},error:function(e,t,a){is_processing=!1}})))},scrollMenu:function(e){$(".nav-left-sidebar-scrolled").length?($(".nav-left-sidebar").removeClass("nav-left-sidebar-scrolled"),$(".dashboard-wrapper").removeClass("nav-left-sidebar-content-scrolled"),$(".nav-left-sidebar .btn-scroll").addClass("btn-light"),$(".nav-left-sidebar .btn-scroll").removeClass("btn-warning"),$(".nav-left-sidebar .btn-scroll").find("i").replaceWith('<i class="fas fa-angle-double-left font-8"></i>')):($(".nav-left-sidebar").addClass("nav-left-sidebar-scrolled"),$(".dashboard-wrapper").addClass("nav-left-sidebar-content-scrolled"),$(".nav-left-sidebar .btn-scroll").removeClass("btn-light"),$(".nav-left-sidebar .btn-scroll").addClass("btn-warning"),$(".nav-left-sidebar .btn-scroll").find("i").replaceWith('<i class="fas fa-angle-double-right font-14 text-dark"></i>'))},setCookie:function(e,t,a){var i=new Date;a?(i.setTime(i.getTime()+24*a*60*60*1e3),document.cookie=e+"="+t+";expires="+i.toUTCString()):document.cookie=e+"="+t+";expires=Fri, 30 Dec 9999 23:59:59 GMT;"},getCookie:function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null},showMenuFileManager:function(){return is_processing||(is_processing=!0,$("#modal_image").remove(),$("body").append('<div class="loading"><span class="dashboard-spinner spinner-xs"></span></div>'),$.ajax({async:!0,url:"common/filemanager",type:"GET",data:{is_show_lightbox:1},success:function(e){is_processing=!1,$(".loading").remove().fadeOut();var t=JSON.stringify(e);if("ng"==(t=JSON.parse(t)).status)return $.notify(t.msg,{type:"danger"}),!1;$("body").append('<div id="modal_image" class="modal fade" role="dialog" data-bs-keyboard="false" data-bs-backdrop="static">'+e+"</div>"),$("html").css("overflow","hidden"),$("#modal_image").modal("show")},error:function(e,t,a){is_processing=!1,$(".loading").remove().fadeOut(),$.notify({message:e.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}})),!1},cropImage:function(e,t){return is_processing||(is_processing=!0,$("#cropper_html").remove(),$("body").append('<div class="loading"><span class="dashboard-spinner spinner-xs"></span></div>'),$.ajax({url:"image/crop",data:{image_url:e,preserve_aspect_ratio:t},dataType:"html",success:function(e){is_processing=!1,$(".loading").remove().fadeOut();var t=JSON.stringify(e);if("ng"==(t=JSON.parse(t)).status)return $.notify(t.msg,{type:"danger"}),!1;$("body").append('<div id="cropper_html">'+e+"</div>"),$("#modal_image_crop").modal("toggle")},error:function(e,t,a){is_processing=!1,$(".loading").remove().fadeOut(),$.notify({message:e.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}})),!1},showRangeValue:function(e){$(e).data("target").length&&$($(e).data("target")).html($(e).val())},submitFormAjax:function(e){if(is_processing)return!1;is_processing=!0,e.preventDefault();var t=e.target,a=$(t).attr("action");if(void 0!==e.originalEvent&&void 0!==e.originalEvent.submitter)var i=e.originalEvent.submitter;else i="";var n=$(t).attr("method");void 0===n&&(n="post");var o=$(this).attr("enctype");return void 0===o&&(o="application/x-www-form-urlencoded"),console.log(e),console.log("element "+this),console.log("action "+a),console.log("button "+i),console.log("method "+n),console.log("enctype "+o),$("body").append('<div class="loading"><span class="dashboard-spinner spinner-xs"></span></div>'),$.ajax({url:a,type:n,data:$(t).serialize(),dataType:"json",cache:!1,contentType:o,processData:!1,beforeSend:function(){$(i).find("i").replaceWith('<i class="fas fa-spinner fa-spin me-1"></i>')},complete:function(){$(i).find("i").replaceWith('<i class="fas fa-save me-1"></i>')},success:function(e){if($(".loading").remove().fadeOut(),is_processing=!1,$(t).find(".is-invalid").removeClass("is-invalid"),$(t).find(".invalid-feedback").removeClass("d-block"),e.token&&$("input[name*='"+csrf_token+"']").val(e.token),e.redirect&&(location=e.redirect.replaceAll("&amp;","&")),"string"==typeof e.error&&$.notify(e.error,{type:"danger"}),"object"==typeof e.error)for(key in e.error)$("#input_"+key.replaceAll(".","_")).addClass("is-invalid").find(".form-control, .form-select, .form-check-input, .form-check-label").addClass("is-invalid"),$("#error_"+key.replaceAll(".","_")).html(e.error[key]).addClass("d-block"),$.notify(e.error[key],{type:"danger"});if(e.success){$.notify(e.success);var a=$(t).attr("data-cc-load"),i=$(t).attr("data-cc-target");void 0!==a&&void 0!==i&&$(i).load(a)}for(key in e)$(t).find("[name='"+key+"']").val(e[key])},error:function(e,t,a){$(".loading").remove().fadeOut(),is_processing=!1,console.log(a+"\r\n"+e.statusText+"\r\n"+e.responseText),$.notify({message:e.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}}),!1}};$((function(){$(window).on("load",(function(){$(".loading").fadeOut(),$("#page_loading").fadeOut()})),setTimeout((function(){$("#page_loading").fadeOut()}),4e3),$(".make-slug").length&&$(".make-slug").on("keyup",(function(){Catcool.makeSlug(this)})),$('a[href="#"]').click((function(e){e.preventDefault?e.preventDefault():e.returnValue=!1})),$(".change_publish").length&&$(document).on("change",".change_publish",(function(e){e.preventDefault(),Catcool.changePublish(this)})),$(document).on("click","#menu_file_manager, .show-file-manager",(function(e){return e.preventDefault(),Catcool.showMenuFileManager(),!1})),$(document).on("submit","form[data-cc-toggle='ajax']",(function(e){Catcool.submitFormAjax(e)})),$(document).on("hidden.bs.modal, hide.bs.modal","#modal_image",(function(){$("html").css("overflow","")})),$("form").length,$(".form-confirm-leave").length&&($(".form-confirm-leave form").data("serialize",$(".form-confirm-leave form").serialize()),$(window).bind("beforeunload",(function(e){if($(".form-confirm-leave form").serialize()!=$(".form-confirm-leave form").data("serialize"))return!0})),$(document).on("click",".form-confirm-leave .btn",(function(){$(window).unbind("beforeunload")}))),$.notifyDefaults({type:"success",placement:{from:"top",align:"right"},template:'<div data-notify="container" class="mx-2 alert alert-{0} alert-dismissible" role="alert"><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a><button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>'}),$('input[name="alert_msg[]"]').length&&$('input[name="alert_msg[]"]').each((function(){$.notify($(this).val(),{type:$(this).data("type")})})),Catcool.checkBoxDelete(),Catcool.deleteSingle(),Catcool.showDatetime(),Catcool.showDate(),Catcool.showTime(),Catcool.checkBoxPermission(),$(document).on("click","[data-toggle='lightbox']",(function(e){e.preventDefault(),$(this).ekkoLightbox()})),$("[data-bs-toggle='popover']").length&&($("[data-bs-toggle='popover']").popover("dispose"),$("[data-bs-toggle='popover']").popover());$(document).on("mouseenter","[data-bs-toggle='tooltip']",(function(){tooltip=bootstrap.Tooltip.getOrCreateInstance(this),tooltip.show()})),$(document).on("click","button",(function(){$(".tooltip").remove()})),$("[data-bs-toggle='tooltip']").length&&($("[data-bs-toggle='tooltip']").tooltip("dispose"),$("[data-bs-toggle='tooltip']").tooltip()),$("#btn_search").length&&$(document).on("click","#btn_search",(function(){$($("#btn_search").data("target")).collapse("toggle")})),$(".multiselect").length&&($(".multiselect").multiselect({buttonClass:"btn btn-sm border text-start",buttonWidth:"100%"}),$("#category_review").length&&($(".multiselect").change((function(){var e=$(this).find("option:selected").map((function(){return $(this).text()})).get().join(",");$("#category_review ul").remove(),$("#category_review").append('<ul class="list-unstyled bullet-check mb-0"></ul>');var t=e.split(",");if(t.length&&""!=t)for(i=0;i<t.length;i++)$("#category_review ul").append("<li>"+t[i]+"</li>");$("#category_review").show()})),setTimeout((function(){$(".multiselect").val()?($("#category_review").append('<ul class="list-unstyled bullet-check mb-0"></ul>'),$(".multiselect :selected").each((function(){$("#category_review ul").append("<li>"+$(this).text()+"</li>")})),$("#category_review").show()):$("#category_review").hide()}),500))),$(".notification-list").length&&$(".notification-list").slimScroll({height:"250px"}),$(".navbar-full-text .menu-list").length&&$(".navbar-full-text .menu-list").slimScroll({}),$(".navbar-full-text .menu-list a").length&&$(".navbar-full-text .menu-list a").click((function(e){$(".navbar-full-text .menu-list a").each((function(){$(this).removeClass("active")})),$(this).addClass("active")})),Catcool.checkLoadContentSeo(),$(".color-picker").length&&$(".color-picker").each((function(){$(this).minicolors({control:$(this).data("control")||"hue",defaultValue:$(this).data("defaultValue")||"",format:$(this).data("format")||"hex",keywords:$(this).data("keywords")||"",inline:"true"===$(this).data("inline"),letterCase:$(this).data("letterCase")||"lowercase",opacity:$(this).data("opacity"),position:$(this).data("position")||"bottom left",swatches:$(this).data("swatches")?$(this).data("swatches").split("|"):[],change:function(e,t){e&&(t&&(e+=", "+t),"object"==typeof console&&console.log(e))},theme:"bootstrap"})})),$("form[data-cc-toggle='ajax']").length||$("form#validationform").submit((function(){return $(this).submit((function(){return!1})),$("body").append('<div class="loading"><span class="dashboard-spinner spinner-xs"></span></div>'),!0}))}));