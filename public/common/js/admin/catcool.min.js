var is_processing=!1,Catcool={makeSlug:function(a){var b=$(a).val();return b=Catcool.convertSlug(b),$("#"+$(a).data("slug-id")).length&&($("#"+$(a).data("slug-id")).attr("placeholder",b),$("#"+$(a).data("slug-id")).val(b)),$("#"+$(a).data("preview-slug")).length&&!$("#"+$(a).data("slug-id")).val().length&&$("#"+$(a).data("preview-slug")).html(b),$("#"+$(a).data("title-id")).length&&($("#"+$(a).data("title-id")).attr("placeholder",$(a).val()),$("#"+$(a).data("title-id")).val($(a).val()),$(".preview-meta-seo").show()),$("#"+$(a).data("preview-title")).length&&!$("#"+$(a).data("preview-title")).val().length&&$("#"+$(a).data("preview-title")).html($(a).val()),!0},convertSlug:function(b){var a=b;return(a=(a="@"+(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace(/[`~!@#$%^&*()_\-+=\[\]{};:'"\\|\/,.<>?\s]/g," ").toLowerCase()).replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a")).replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e")).replace(/i|í|ì|ỉ|ĩ|ị/gi,"i")).replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o")).replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u")).replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y")).replace(/đ/gi,"d")).replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,"")).replace(/ /gi," - ")).replace(/\-\-\-\-\-/gi,"-")).replace(/\-\-\-\-/gi,"-")).replace(/\-\-\-/gi,"-")).replace(/\-\-/gi,"-"))+"@").replace(/\@\-|\-\@|\@/gi,"")).replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},setContentSeo:function(a){if($("#"+$(a).data("seo-id")).length){var b="";$(a).val().length&&(b=$(a).val()),$(a).data("is-slug")&&(b=Catcool.convertSlug(b),$(a).val(b)),$(".preview-meta-seo").show(),$("#"+$(a).data("seo-id")).html(b);var c=$(a).data("seo-id")+"_length";$("#"+c).length&&($(a).val().length?$("#"+c).html($(a).val().length):$(a).attr("placeholder")?$("#"+c).html($(a).attr("placeholder").length):$("#"+c).html(0)),""==$.trim($(".preview-meta-seo .meta-seo-title").html())&&""==$.trim($(".preview-meta-seo .meta-seo-url").html())&&""==$.trim($(".preview-meta-seo .meta-seo-description").html())&&$(".preview-meta-seo").hide()}},checkLoadContentSeo:function(){return!!$(".seo-meta-length").length&&($(".seo-meta-length").each(function(){var a=$(this).data("target");$("#"+a).val().length?$(this).html($("#"+a).val().length):$("#"+a).attr("placeholder")?$(this).html($("#"+a).attr("placeholder").length):$(this).html(0)}),!0)},changePublish:function(a){if(is_processing||!$('input[name="manage_url"]').length)return!1;var c=$('input[name="manage_url"]').val(),d=$(a).data("id"),b=0;$(a).is(":checked")&&(b=1),is_processing=!0,$.ajax({url:c+"/publish",data:{id:d,published:b,data:$(a).data(),[$("input[name*='"+csrf_token+"']").attr("name")]:$("input[name*='"+csrf_token+"']").val()},type:"POST",success:function(c){is_processing=!1;var b=JSON.stringify(c);if((b=JSON.parse(b)).token&&$("input[name*='"+csrf_token+"']").val(b.token),"ng"==b.status)return $.notify(b.msg,{type:"danger"}),$(a).prop("checked",$(a).attr("value")),!1;$.notify(b.msg)},error:function(a,b,c){is_processing=!1,$.notify({message:a.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}})},checkBoxDelete:function(){if(!$('input[name="manage_check_all"]').length||!$('input[name="manage_ids[]"]').length)return!1;$(document).on("change",'input[name="manage_check_all"]',function(){$("#delete_multiple").addClass(["animate__animated","animate__fadeIn"]).show(),$('input[name="manage_ids[]"]').prop("checked",$(this).prop("checked")),$('input[name="manage_ids[]"]:checked').length||$("#delete_multiple").hide()}),$(document).on("change",'input[name="manage_ids[]"]',function(){$('input[name="manage_ids[]"]').each(function(){$(this).is(":checked")&&$("#delete_multiple").addClass(["animate__animated","animate__fadeIn"]).show()}),$('input[name="manage_check_all"]').prop("checked",!1),$('input[name="manage_ids[]"]:checked').length?$('input[name="manage_ids[]"]:checked').length==$('input[name="manage_ids[]"]').length&&$('input[name="manage_check_all"]').prop("checked",!0):$("#delete_multiple").hide()}),$(document).on("click","#delete_multiple",function(a){a.preventDefault();var b=$(this),c=[];$('input[name="manage_ids[]"]:checked').each(function(){c.push($(this).val())}),Catcool.getModalDelete(b,c)})},deleteSingle:function(){if(!$(".btn_delete_single").length)return!1;$(document).on("click",".btn_delete_single",function(b){b.preventDefault();var a=$(this);Catcool.getModalDelete(a,a.data("id"),!0)})},getModalDelete:function(a,d,e){if(!$('input[name="manage_url"]').length||is_processing)return!1;is_processing=!0;var b=$('input[name="manage_url"]').val()+"/delete",c=0;1==a.data("is-trash")&&(c=1),b+="?is_trash="+c,$.ajax({url:b,data:{delete_ids:d,data:a.data(),[$("input[name*='"+csrf_token+"']").attr("name")]:$("input[name*='"+csrf_token+"']").val()},type:"POST",beforeSend:function(){e?a.find("i").replaceWith('<i class="fas fa-spinner fa-spin"></i>'):a.find("i").replaceWith('<i class="fas fa-spinner fa-spin me-1"></i>')},complete:function(){e?a.find("i").replaceWith('<i class="fas fa-trash-alt"></i>'):a.find("i").replaceWith('<i class="fas fa-trash-alt me-1"></i>')},success:function(b){is_processing=!1;var a=JSON.stringify(b);return((a=JSON.parse(a)).token&&$("input[name*='"+csrf_token+"']").val(a.token),"ng"==a.status)?($.notify(a.msg,{type:"danger"}),!1):"redirect"==a.status?(window.location=a.url,!1):void($("#modal_delete_confirm").remove(),$("body").append('<div id="modal_delete_confirm" class="modal fade" role="dialog">'+a.data+"</div>"),$("#modal_delete_confirm").modal("show"))},error:function(a,b,c){is_processing=!1,$.notify({message:a.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}})},submitDelete:function(a){if(is_processing)return!1;is_processing=!0,$.ajax({url:$("#"+a).attr("action"),type:"POST",data:$("#"+a).serialize(),beforeSend:function(){$("#"+a+" #submit_delete").find("i").replaceWith('<i class="fas fa-spinner fa-spin me-1"></i>')},complete:function(){$("#"+a+" #submit_delete").find("i").replaceWith('<i class="fas fa-trash-alt me-1"></i>')},success:function(b){is_processing=!1;var a=JSON.stringify(b);return((a=JSON.parse(a)).token&&$("input[name*='"+csrf_token+"']").val(a.token),"redirect"==a.status)?(window.location=a.url,!1):"ng"==a.status?($.notify(a.msg,{type:"danger"}),!1):"reload"==a.status?(location.reload(),!1):void($.each(a.ids,function(b,a){if(!$("tr#item_id_"+a).length)return location.reload(),!1;$("tr#item_id_"+a).remove("slow").fadeOut(),$("tr#item_id_"+a+" .btn_delete_single").tooltip("dispose")}),$("#modal_delete_confirm").modal("hide"),$.notify(a.msg))},error:function(a,b,c){is_processing=!1,$.notify({message:a.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}})},showDatetime:function(){if($(".show-datetime-picker").length){var a={sideBySide:!1,icons:{time:"far fa-clock active",date:"fa fa-calendar-alt",up:"fa fa-arrow-up",down:"fa fa-arrow-down"},daysOfWeekDisabled:[0,6]};"vi"==$(".show-datetime-picker").data("date-locale")&&(a={sideBySide:!1,icons:{time:"far fa-clock active",date:"fa fa-calendar-alt",up:"fa fa-arrow-up",down:"fa fa-arrow-down"},daysOfWeekDisabled:[0,6],locale:"vi"}),$(".show-datetime-picker").datetimepicker(a)}},showDate:function(){if($(".show-date-picker").length){var a={sideBySide:!1};"vi"==$(".show-date-picker").data("date-locale")&&(a={sideBySide:!1,locale:"vi"}),$(".show-date-picker").datetimepicker(a)}},showTime:function(){$(".show-time-picker").length&&$(".show-time-picker").datetimepicker({sideBySide:!1,format:$(".show-time-picker").data("date-format"),pickDate:!1,pickSeconds:!1,pick12HourFormat:!1})},checkBoxPermission:function(){if(!$('input[name="cb_permission_all"]').length||!$('input[name="permissions[]"]').length)return!1;$(document).on("change",'input[name="cb_permission_all"]',function(){$('input[name="permissions[]"]').prop("checked",$(this).prop("checked"))}),$(document).on("change",'input[name="permissions[]"]',function(){$('input[name="cb_permission_all"]').prop("checked",!1),$('input[name="permissions[]"]:checked').length==$('input[name="permissions[]"]').length&&$('input[name="cb_permission_all"]').prop("checked",!0)})},changeCaptcha:function(){if(is_processing||!$(".js-re-captcha").length)return!1;is_processing=!0,$.ajax({url:"users/auth/recaptcha",type:"POST",data:[],beforeSend:function(){$(".js-re-captcha").find("i").replaceWith('<i class="fas fa-spinner fa-spin me-2"></i>')},complete:function(){$(".js-re-captcha").find("i").replaceWith('<i class="fas fa-sync font-18"></i>')},success:function(b){is_processing=!1;var a=JSON.stringify(b);a=JSON.parse(a),$("#ci_captcha_image").html(a.captcha),$("#ci_captcha_image").fadeIn("slow")},error:function(a,b,c){is_processing=!1}})},scrollMenu:function(a){$(".nav-left-sidebar-scrolled").length?($(".nav-left-sidebar").removeClass("nav-left-sidebar-scrolled"),$(".dashboard-wrapper").removeClass("nav-left-sidebar-content-scrolled"),$(".nav-left-sidebar .btn-scroll").addClass("btn-light"),$(".nav-left-sidebar .btn-scroll").removeClass("btn-warning"),$(".nav-left-sidebar .btn-scroll").find("i").replaceWith('<i class="fas fa-angle-double-left font-8"></i>')):($(".nav-left-sidebar").addClass("nav-left-sidebar-scrolled"),$(".dashboard-wrapper").addClass("nav-left-sidebar-content-scrolled"),$(".nav-left-sidebar .btn-scroll").removeClass("btn-light"),$(".nav-left-sidebar .btn-scroll").addClass("btn-warning"),$(".nav-left-sidebar .btn-scroll").find("i").replaceWith('<i class="fas fa-angle-double-right font-14 text-dark"></i>'))},setCookie:function(b,c,d){var a=new Date;d?(a.setTime(a.getTime()+864e5*d),document.cookie=b+"="+c+";expires="+a.toUTCString()):document.cookie=b+"="+c+";expires=Fri, 30 Dec 9999 23:59:59 GMT;"},getCookie:function(b){var a=document.cookie.match("(^|;) ?"+b+"=([^;]*)(;|$)");return a?a[2]:null},showMenuFileManager:function(){return!is_processing&&(is_processing=!0,$("#modal_image").remove(),$("body").append('<div class="loading"><span class="dashboard-spinner spinner-xs"></span></div>'),$.ajax({async:!0,url:"common/filemanager",type:"GET",data:{is_show_lightbox:1},success:function(b){is_processing=!1,$(".loading").remove().fadeOut();var a=JSON.stringify(b);if("ng"==(a=JSON.parse(a)).status)return $.notify(a.msg,{type:"danger"}),!1;$("body").append('<div id="modal_image" class="modal fade" role="dialog" data-bs-keyboard="false" data-bs-backdrop="static">'+b+"</div>"),$("html").css("overflow","hidden"),$("#modal_image").modal("show")},error:function(a,b,c){is_processing=!1,$(".loading").remove().fadeOut(),$.notify({message:a.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}}),!1)},cropImage:function(a,b){return!is_processing&&(is_processing=!0,$("#cropper_html").remove(),$("body").append('<div class="loading"><span class="dashboard-spinner spinner-xs"></span></div>'),$.ajax({url:"image/crop",data:{image_url:a,preserve_aspect_ratio:b},dataType:"html",success:function(b){is_processing=!1,$(".loading").remove().fadeOut();var a=JSON.stringify(b);if("ng"==(a=JSON.parse(a)).status)return $.notify(a.msg,{type:"danger"}),!1;$("body").append('<div id="cropper_html">'+b+"</div>"),$("#modal_image_crop").modal("toggle")},error:function(a,b,c){is_processing=!1,$(".loading").remove().fadeOut(),$.notify({message:a.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}}),!1)},showRangeValue:function(a){$(a).data("target").length&&$($(a).data("target")).html($(a).val())},submitFormAjax:function(a){if(is_processing)return!1;is_processing=!0,a.preventDefault();var d=a.target,e=$(d).attr("action");if(void 0!==a.originalEvent&& void 0!==a.originalEvent.submitter)var f=a.originalEvent.submitter;else var f="";var b=$(d).attr("method");void 0===b&&(b="post");var c=$(this).attr("enctype");return void 0===c&&(c="application/x-www-form-urlencoded"),console.log(a),console.log("element "+this),console.log("action "+e),console.log("button "+f),console.log("method "+b),console.log("enctype "+c),$("body").append('<div class="loading"><span class="dashboard-spinner spinner-xs"></span></div>'),$.ajax({url:e,type:b,data:$(d).serialize(),dataType:"json",cache:!1,contentType:c,processData:!1,beforeSend:function(){$(f).find("i").replaceWith('<i class="fas fa-spinner fa-spin me-1"></i>')},complete:function(){$(f).find("i").replaceWith('<i class="fas fa-save me-1"></i>')},success:function(a){if($(".loading").remove().fadeOut(),is_processing=!1,$(d).find(".is-invalid").removeClass("is-invalid"),$(d).find(".invalid-feedback").removeClass("d-block"),a.token&&$("input[name*='"+csrf_token+"']").val(a.token),a.redirect&&(location=a.redirect.replaceAll("&amp;","&")),"string"==typeof a.error&&$.notify(a.error,{type:"danger"}),"object"==typeof a.error)for(key in a.error)$("#input_"+key.replaceAll(".","_")).addClass("is-invalid").find(".form-control, .form-select, .form-check-input, .form-check-label").addClass("is-invalid"),$("#error_"+key.replaceAll(".","_")).html(a.error[key]).addClass("d-block"),$.notify(a.error[key],{type:"danger"});if(a.success){$.notify(a.success);var b=$(d).attr("data-cc-load"),c=$(d).attr("data-cc-target");void 0!==b&& void 0!==c&&$(c).load(b)}for(key in a)$(d).find("[name='"+key+"']").val(a[key])},error:function(a,c,b){$(".loading").remove().fadeOut(),is_processing=!1,console.log(b+"\r\n"+a.statusText+"\r\n"+a.responseText),$.notify({message:a.responseJSON.message+" Please reload the page!!!",url:window.location.href,target:"_self"},{type:"danger"})}}),!1}};$(function(){$(window).on("load",function(){$(".loading").fadeOut(),$("#page_loading").fadeOut()}),setTimeout(function(){$("#page_loading").fadeOut()},4e3),$(".make-slug").length&&$(".make-slug").on("keyup",function(){Catcool.makeSlug(this)}),$('a[href="#"]').click(function(a){a.preventDefault?a.preventDefault():a.returnValue=!1}),$(".change_publish").length&&$(document).on("change",".change_publish",function(a){a.preventDefault(),Catcool.changePublish(this)}),$(document).on("click","#menu_file_manager, .show-file-manager",function(a){return a.preventDefault(),Catcool.showMenuFileManager(),!1}),$(document).on("submit","form[data-cc-toggle='ajax']",function(a){Catcool.submitFormAjax(a)}),$(document).on("hidden.bs.modal, hide.bs.modal","#modal_image",function(){$("html").css("overflow","")}),$("form").length,$(".form-confirm-leave").length&&($(".form-confirm-leave form").data("serialize",$(".form-confirm-leave form").serialize()),$(window).bind("beforeunload",function(a){if($(".form-confirm-leave form").serialize()!=$(".form-confirm-leave form").data("serialize"))return!0}),$(document).on("click",".form-confirm-leave .btn",function(){$(window).unbind("beforeunload")})),$.notifyDefaults({type:"success",placement:{from:"top",align:"right"},template:'<div data-notify="container" class="mx-2 alert alert-{0} alert-dismissible" role="alert"><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a><button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>'}),$('input[name="alert_msg[]"]').length&&$('input[name="alert_msg[]"]').each(function(){$.notify($(this).val(),{type:$(this).data("type")})}),Catcool.checkBoxDelete(),Catcool.deleteSingle(),Catcool.showDatetime(),Catcool.showDate(),Catcool.showTime(),Catcool.checkBoxPermission(),$(document).on("click","[data-toggle='lightbox']",function(a){a.preventDefault(),$(this).ekkoLightbox()}),$("[data-bs-toggle='popover']").length&&($("[data-bs-toggle='popover']").popover("dispose"),$("[data-bs-toggle='popover']").popover()),$(document).on("mouseenter","[data-bs-toggle='tooltip']",function(){(tooltip=bootstrap.Tooltip.getOrCreateInstance(this)).show()}),$(document).on("click","button",function(){$(".tooltip").remove()}),$("[data-bs-toggle='tooltip']").length&&($("[data-bs-toggle='tooltip']").tooltip("dispose"),$("[data-bs-toggle='tooltip']").tooltip()),$("#btn_search").length&&$(document).on("click","#btn_search",function(){$($("#btn_search").data("target")).collapse("toggle")}),$(".multiselect").length&&($(".multiselect").multiselect({buttonClass:"btn btn-sm border text-start",buttonWidth:"100%"}),$(".multiselect").change(function(){var a="#category_review";if($(this).data("target")&&(a=$(this).data("target")),!$(a).length)return!1;var c=$(this).find("option:selected").map(function(){return $(this).text()}).get().join(",");$(a+" ul").remove(),$(a).append('<ul class="list-unstyled bullet-check mb-0"></ul>');var b=c.split(",");if(b.length&&""!=b)for(i=0;i<b.length;i++)$(a+" ul").append("<li>"+b[i]+"</li>");$(a).show()}),setTimeout(function(){$(".multiselect").val()?($("#category_review").html(""),$("#category_review").append('<ul class="list-unstyled bullet-check mb-0"></ul>'),$(".multiselect :selected").each(function(){$("#category_review ul").append("<li>"+$(this).text()+"</li>")}),$("#category_review").show()):$("#category_review").hide()},500)),$(".notification-list").length&&$(".notification-list").slimScroll({height:"250px"}),$(".navbar-full-text .menu-list").length&&$(".navbar-full-text .menu-list").slimScroll({}),$(".navbar-full-text .menu-list a").length&&$(".navbar-full-text .menu-list a").click(function(a){$(".navbar-full-text .menu-list a").each(function(){$(this).removeClass("active")}),$(this).addClass("active")}),Catcool.checkLoadContentSeo(),$(".color-picker").length&&$(".color-picker").each(function(){$(this).minicolors({control:$(this).data("control")||"hue",defaultValue:$(this).data("defaultValue")||"",format:$(this).data("format")||"hex",keywords:$(this).data("keywords")||"",inline:"true"===$(this).data("inline"),letterCase:$(this).data("letterCase")||"lowercase",opacity:$(this).data("opacity"),position:$(this).data("position")||"bottom left",swatches:$(this).data("swatches")?$(this).data("swatches").split("|"):[],change:function(a,b){a&&(b&&(a+=", "+b),"object"==typeof console&&console.log(a))},theme:"bootstrap"})}),$("form[data-cc-toggle='ajax']").length||$("form#validationform").submit(function(){return $(this).submit(function(){return!1}),$("body").append('<div class="loading"><span class="dashboard-spinner spinner-xs"></span></div>'),!0})})