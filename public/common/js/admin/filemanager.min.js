var is_processing=!1;$((function(){$("a[data-bs-toggle='image'] .button-image").length&&$(document).on("click","a[data-bs-toggle='image'] .button-image",(function(a){if(is_processing)return!1;is_processing=!0,a.preventDefault(),$("#modal_image").remove(),$("body").append('<div class="loading"><span class="dashboard-spinner spinner-xs"></span></div>');var e=$(this);$.ajax({url:"common/filemanager?target="+encodeURIComponent(e.parent().parent().data("target"))+"&thumb="+encodeURIComponent(e.parent().parent().data("thumb"))+"&type="+encodeURIComponent(e.parent().parent().data("type")),dataType:"html",beforeSend:function(){e.find("i").replaceWith('<i class="fas fa-spinner fa-spin"></i>')},complete:function(){e.find("i").replaceWith('<i class="fas fa-pencil-alt"></i>')},success:function(a){is_processing=!1,$(".loading").remove().fadeOut(),$("body").append('<div id="modal_image" class="modal fade" aria-hidden="true" data-bs-keyboard="false" data-bs-backdrop="static">'+a+"</div>"),$("#modal_image").modal("show"),$("html").css("overflow","hidden")},error:function(a,e,t){$(".loading").remove().fadeOut(),is_processing=!1}})})),$("a[data-bs-toggle='image'] .button-clear").length&&$(document).on("click","a[data-bs-toggle='image'] .button-clear",(function(a){a.preventDefault(),$("#"+$(this).parent().parent().data("target")).val(""),$(this).parent().parent().find("img").attr("src",$(this).parent().parent().find("img").data("placeholder"))})),$(document).on("click","a[data-bs-toggle='image'] img",(function(a){a.preventDefault(),$(this).find("a").remove();var e='<a href="'+$(this).parent().parent().find("img").attr("src")+'" data-lightbox="products" style="display: none"></a>';$(this).append(e),$(this).find("a").click()}))}));