var is_processing=!1;$(function(){$("a[data-bs-toggle='image'] .button-image").length&&$(document).on('click',"a[data-bs-toggle='image'] .button-image",function(b){if(is_processing)return!1;is_processing=!0,b.preventDefault(),$('#modal_image').remove();var a=$(this);$.ajax({url:'common/filemanager?target='+encodeURIComponent(a.parent().data('target'))+'&thumb='+encodeURIComponent(a.parent().data('thumb'))+'&type='+encodeURIComponent(a.parent().data('type')),dataType:'html',beforeSend:function(){a.find('i').replaceWith('<i class="fas fa-spinner fa-spin me-1"></i>')},complete:function(){a.find('i').replaceWith('<i class="fas fa-pencil-alt me-1"></i>')},success:function(a){is_processing=!1,$('body').append('<div id="modal_image" class="modal fade" aria-hidden="true" data-bs-keyboard="false" data-bs-backdrop="static">'+a+'</div>'),$('#modal_image').modal('show')},error:function(){is_processing=!1}})}),$("a[data-bs-toggle='image'] .button-clear").length&&$(document).on('click',"a[data-bs-toggle='image'] .button-clear",function(a){a.preventDefault(),$("#"+$(this).parent().data('target')).val(''),$(this).parent().find('img').attr('src',$(this).parent().find('img').data('placeholder'))}),$(document).on('hidden.bs.modal, hide.bs.modal','#modal_image',function(){})})